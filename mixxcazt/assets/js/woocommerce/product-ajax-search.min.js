!function(o){"use strict";o(document).ready(function(){var t,e,i,r,a,s;t=o(".woocommerce-product-search"),e=o(".ajax-search .woocommerce-product-search .search-field"),i=o(".ajax-search-result"),r=wp.template("ajax-live-search-template"),a=o(".input-dropdown-inner"),s=o("> .list-wrapper",a),o("body").on("click",function(){i.hide(),s.slideUp(100),a.removeClass("dd-shown")}),o(".input-dropdown-inner > a").on("click",function(e){return e.preventDefault(),a.hasClass("dd-shown")?(a.removeClass("dd-shown"),s.slideUp(100)):(a.addClass("dd-shown"),s.slideDown(100)),i.hide(),!1}),o(".input-dropdown-inner > .list-wrapper").on("click","a",function(e){e.preventDefault();var n=o(this).data("val"),t=o(this).text();o(".input-dropdown-inner > .list-wrapper").find(".current-item").removeClass("current-item"),o(this).parent().addClass("current-item"),0!=n?s.find("ul:not(.children) > li:first-child").show():0==n&&s.find("ul:not(.children) > li:first-child").hide(),o(".input-dropdown-inner > a span").text(t),o(".input-dropdown-inner > select").val(n).trigger("cat_selected"),s.slideUp(100),a.removeClass("dd-shown")}),o(".input-dropdown-inner > select").change(function(){var e=o(this).val(),n=o(this).find("option:selected").text();o(".input-dropdown-inner > .list-wrapper").find(".current-item").removeClass("current-item"),o(this).parent().addClass("current-item"),0!=e?s.find("ul:not(.children) > li:first-child").show():0==e&&s.find("ul:not(.children) > li:first-child").hide(),o(".input-dropdown-inner > a span").text(n)}),e.length&&e.keyup(function(){if(2<this.value.length){var e=o('select[name="product_cat"]',t).val();o.ajax({url:mixxcaztAjax.ajaxurl,type:"post",data:{action:"mixxcazt_ajax_search_products",query:this.value,product_cat:e},beforeSend:function(){t.addClass("loading")},success:function(e){t.removeClass("loading");var n=o.parseJSON(e);i.empty(),i.show(),o.each(n,function(e,n){i.append(r({url:n.url,title:n.value,img:n.img,price:n.price}))})}})}else i.hide()}).on("click",function(e){e.stopPropagation()}).on("focus",function(e){s.slideUp(100),a.removeClass("dd-shown"),2<this.value.length&&i.show()})})}(jQuery);